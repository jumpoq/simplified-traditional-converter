<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>自动简繁互转</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* 自定义样式 */
        html,
        body {
            height: 100%;
            overflow: hidden;
            /* 防止body滚动 */
        }

        body {
            font-family: 'Inter', sans-serif;
            /* 应用 Inter 字体 */
            display: flex;
            flex-direction: column;
        }

        /* 绿色波浪下划线样式 */
        .converted-char {
            text-decoration: underline;
            text-decoration-style: wavy;
            text-decoration-color: #10B981;
            /* Tailwind green-500 */
            text-underline-offset: 2px;
            /* 调整下划线位置 */
        }

        /* 统一输入/输出区域样式 */
        .text-area-common {
            width: 100%;
            height: 100%;
            /* 占据父容器所有高度 */
            padding: 0.75rem;
            /* p-3 */
            border: 1px solid #E2E8F0;
            /* border-gray-300 */
            border-radius: 0.375rem;
            /* rounded-md */
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
            font-size: 0.875rem;
            /* text-sm */
            line-height: 1.25rem;
            color: #374151;
            /* text-gray-700 */
            background-color: #F9FAFB;
            /* bg-gray-50 */
            resize: none;
            overflow-y: auto;
            /* 内部滚动 */
        }

        .text-area-common:focus,
        .text-area-common:focus-within {
            /* :focus-within 用于 div */
            outline: 2px solid transparent;
            outline-offset: 2px;
            border-color: #3B82F6;
            /* focus:border-blue-500 */
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
            /* focus:ring-2 focus:ring-blue-500 */
        }

        /* 隐藏滚动条但保留滚动功能 (可选) */
        .text-area-common::-webkit-scrollbar {
            display: none;
            /* Chrome, Safari, Opera */
        }

        .text-area-common {
            -ms-overflow-style: none;
            /* IE and Edge */
            scrollbar-width: none;
            /* Firefox */
        }

        /* Notion 风格按钮 */
        .notion-button {
            background-color: #F7FAFC;
            /* bg-gray-50 */
            border: 1px solid #E2E8F0;
            /* border-gray-300 */
            color: #4A5568;
            /* text-gray-700 */
            transition: background-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            display: inline-flex;
            /* 用于对齐图标和文字 */
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            /* py-2 px-4 */
            border-radius: 0.375rem;
            /* rounded-md */
            font-weight: 500;
            /* font-medium */
            font-size: 0.875rem;
            /* text-sm */
        }

        .notion-button:hover {
            background-color: #EDF2F7;
            /* bg-gray-100 */
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }

        .notion-button:active {
            background-color: #E2E8F0;
            /* bg-gray-200 */
        }

        /* 提示消息样式 */
        .toast {
            position: fixed;
            bottom: 6rem;
            /* 向上移动一点，避免被按钮遮挡 */
            left: 50%;
            transform: translateX(-50%);
            padding: 0.75rem 1.5rem;
            background-color: rgba(17, 24, 39, 0.9);
            /* bg-gray-900 with opacity */
            color: white;
            border-radius: 0.5rem;
            /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            /* shadow-md */
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            z-index: 50;
            pointer-events: none;
            /* 防止遮挡 */
        }

        .toast.show {
            opacity: 1;
        }
    </style>
</head>

<body class="bg-gray-100 p-4">
    <div class="flex-grow flex flex-col bg-white rounded-xl shadow-lg w-full max-w-6xl mx-auto overflow-hidden">
        <h1 class="text-xl md:text-2xl font-semibold text-gray-800 p-4 text-center shrink-0 border-b border-gray-200">
            简繁互转
        </h1>

        <div class="flex-grow grid grid-cols-1 md:grid-cols-2 gap-4 p-4 overflow-y-auto" style="min-height: 0;">
            <div class="flex flex-col h-full">
                <label for="inputText" class="block text-sm font-medium text-gray-600 mb-2 shrink-0">输入文本 (自动转换)</label>
                <div class="flex-grow"> <textarea id="inputText" class="text-area-common"
                        placeholder="在此输入或粘贴简体/繁体文字..."></textarea>
                </div>
            </div>

            <div class="flex flex-col h-full">
                <label for="outputText" class="block text-sm font-medium text-gray-600 mb-2 shrink-0">转换结果</label>
                <div class="flex-grow">
                    <div id="outputContainer" class="text-area-common" tabindex="0">
                        <div id="outputText" class="whitespace-pre-wrap break-words"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="shrink-0 flex justify-center items-center space-x-4 p-3 md:p-4 border-t border-gray-200 bg-gray-50">
            <button id="pasteButton" class="notion-button">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                </svg>
                <span>贴入</span>
            </button>
            <button id="copyButton" class="notion-button">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                </svg>
                <span>复制</span>
            </button>
        </div>
    </div>

    <div id="toastMessage" class="toast"></div>

    <script>
        // --- 简体繁体映射表 (示例，实际应用建议使用更完善的库) ---
        const s2tMap = {
            '国': '國', '台': '臺', '湾': '灣', '简': '簡', '体': '體', '繁': '繁', '字': '字',
            '转': '轉', '换': '換', '网': '網', '页': '頁', '设': '設', '计': '計', '风': '風',
            '格': '格', '实': '實', '现': '現', '处': '處', '理': '理', '复': '複', '制': '製',
            '义': '義', '发': '發', '动': '動', '务': '務', '区': '區', '历': '歷', '归': '歸',
            '众': '眾', '优': '優', '伙': '夥', '会': '會', '余': '餘', '仑': '侖', '仓': '倉',
            '备': '備', '传': '傳', '伤': '傷', '价': '價', '儿': '兒', '克': '剋', '冲': '沖',
            '几': '幾', '凭': '憑', '出': '齣', '击': '擊', '划': '劃', '别': '彆', '则': '則',
            '剧': '劇', '刘': '劉', '剑': '劍', '办': '辦', '劝': '勸', '务': '務', '胜': '勝',
            '厂': '廠', '历': '歷', '压': '壓', '厌': '厭', '厕': '廁', '厢': '廂', '县': '縣',
            '叁': '參', '双': '雙', '只': '隻', '叶': '葉', '号': '號', '叹': '嘆', '吓': '嚇',
            '咸': '鹹', '响': '響', '哑': '啞', '哗': '嘩', '哟': '喲', '唤': '喚', '啬': '嗇',
            '吗': '嗎', '吨': '噸', '听': '聽', '启': '啟', '吴': '吳', '呐': '吶', '呕': '嘔',
            '园': '園', '圆': '圓', '图': '圖', '团': '團', '圣': '聖', '场': '場', '坏': '壞',
            '块': '塊', '坚': '堅', '坛': '壇', '坝': '壩', '坟': '墳', '坠': '墜', '垄': '壟',
            '垒': '壘', '垦': '墾', '垫': '墊', '壳': '殼', '壶': '壺', '处': '處', '备': '備',
            '复': '復', '头': '頭', '夹': '夾', '夺': '奪', '奋': '奮', '奖': '獎', '奥': '奧',
            '妆': '妝', '妇': '婦', '妈': '媽', '妩': '嫵', '妫': '媯', '姗': '姍', '娄': '婁',
            '娅': '婭', '娆': '嬈', '娇': '嬌', '娱': '娛', '婴': '嬰', '婶': '嬸', '孙': '孫',
            '学': '學', '宁': '寧', '宝': '寶', '实': '實', '宠': '寵', '审': '審', '宪': '憲',
            '宫': '宮', '家': '傢', '宾': '賓', '宽': '寬', '寝': '寢', '对': '對', '寻': '尋',
            '导': '導', '寿': '壽', '将': '將', '尔': '爾', '尘': '塵', '尝': '嘗', '尧': '堯',
            '尸': '屍', '尽': '盡', '层': '層', '屉': '屜', '届': '屆', '属': '屬', '屿': '嶼',
            '岁': '歲', '岂': '豈', '岗': '崗', '岛': '島', '岭': '嶺', '峦': '巒', '崭': '嶄',
            '巩': '鞏', '币': '幣', '帅': '帥', '师': '師', '帐': '帳', '带': '帶', '帧': '幀',
            '帮': '幫', '干': '幹', '并': '並', '广': '廣', '庄': '莊', '庆': '慶', '庐': '廬',
            '库': '庫', '应': '應', '庙': '廟', '庞': '龐', '废': '廢', '开': '開', '异': '異',
            '弃': '棄', '张': '張', '弥': '彌', '弯': '彎', '弹': '彈', '强': '強', '归': '歸',
            '录': '錄', '形': '形', '彻': '徹', '征': '徵', '径': '徑', '御': '禦', '忆': '憶',
            '忧': '憂', '怀': '懷', '态': '態', '怂': '慫', '怜': '憐', '总': '總', '怼': '懟',
            '恋': '戀', '恳': '懇', '恶': '惡', '恼': '惱', '悬': '懸', '悯': '憫', '惊': '驚',
            '惠': '惠', '惧': '懼', '惨': '慘', '惩': '懲', '惫': '憊', '惭': '慚', '惯': '慣',
            '想': '想', '愿': '願', '愤': '憤', '懒': '懶', '戏': '戲', '战': '戰', '户': '戶',
            '扎': '紮', '扑': '撲', '托': '託', '执': '執', '扩': '擴', '扫': '掃', '扬': '揚',
            '扰': '擾', '抚': '撫', '抠': '摳', '抡': '掄', '抢': '搶', '护': '護', '报': '報',
            '担': '擔', '拟': '擬', '拢': '攏', '拣': '揀', '拥': '擁', '拦': '攔', '拧': '擰',
            '拨': '撥', '择': '擇', '挂': '掛', '挚': '摯', '挛': '攣', '挝': '撾', '挞': '撻',
            '挟': '挾', '挠': '撓', '挡': '擋', '挣': '掙', '挤': '擠', '挥': '揮', '捞': '撈',
            '损': '損', '捡': '撿', '换': '換', '捣': '搗', '据': '據', '捻': '撚', '掳': '擄',
            '掷': '擲', '掸': '撣', '掺': '摻', '捉': '捉', '据': '據', '捻': '撚', '掳': '擄',
            '掷': '擲', '掸': '撣', '掺': '摻', '捉': '捉', '摇': '搖', '摄': '攝', '摊': '攤',
            '摩': '摩', '摹': '摹', '撩': '撩', '撅': '撅', '撑': '撐', '撒': '撒', '撕': '撕',
            '撷': '擷', '撞': '撞', '撤': '撤', '拨': '撥', '播': '播', '掸': '撣', '据': '據',
            '攒': '攢', '扩': '擴', '拢': '攏', '拣': '揀', '拥': '擁', '拦': '攔', '拧': '擰',
            '拨': '撥', '择': '擇', '挂': '掛', '挚': '摯', '挛': '攣', '挝': '撾', '挞': '撻',
            '挟': '挾', '挠': '撓', '挡': '擋', '挣': '掙', '挤': '擠', '挥': '揮', '捞': '撈',
            '损': '損', '捡': '撿', '换': '換', '捣': '搗', '据': '據', '捻': '撚', '掳': '擄',
            '掷': '擲', '掸': '撣', '掺': '摻', '捉': '捉', '摇': '搖', '摄': '攝', '摊': '攤',
            '摩': '摩', '摹': '摹', '撩': '撩', '撅': '撅', '撑': '撐', '撒': '撒', '撕': '撕',
            '撷': '擷', '撞': '撞', '撤': '撤', '拨': '撥', '播': '播', '掸': '撣', '据': '據',
            '攒': '攢', '政': '政', '故': '故', '敌': '敵', '教': '教', '敛': '斂', '敝': '敝',
            '数': '數', '斋': '齋', '斗': '鬥', '斩': '斬', '断': '斷', '无': '無', '旧': '舊',
            '时': '時', '旷': '曠', '昙': '曇', '昼': '晝', '显': '顯', '晋': '晉', '晒': '曬',
            '晓': '曉', '晕': '暈', '晚': '晚', '暂': '暫', '暖': '暖', '暗': '暗', '暧': '曖',
            '术': '術', '朴': '樸', '机': '機', '杀': '殺', '杂': '雜', '权': '權', '杆': '桿',
            '条': '條', '来': '來', '杨': '楊', '杰': '傑', '松': '鬆', '板': '闆', '极': '極',
            '构': '構', '析': '析', '枪': '槍', '枫': '楓', '柜': '櫃', '柠': '檸', '查': '查',
            '柬': '柬', '栅': '柵', '标': '標', '栈': '棧', '栋': '棟', '栏': '欄', '树': '樹',
            '样': '樣', '核': '核', '根': '根', '格': '格', '栽': '栽', '栾': '欒', '案': '案',
            '桌': '桌', '桥': '橋', '桨': '槳', '桩': '樁', '梦': '夢', '检': '檢', '椭': '橢',
            '楼': '樓', '槛': '檻', '欢': '歡', '欲': '慾', '款': '款', '欺': '欺', '歌': '歌',
            '欧': '歐', '垄': '壟', '步': '步', '歪': '歪', '历': '歷', '歹': '歹', '死': '死',
            '歼': '殲', '残': '殘', '殴': '毆', '段': '段', '殷': '殷', '毁': '毀', '毂': '轂',
            '毕': '畢', '毙': '斃', '毡': '氈', '氢': '氫', '氯': '氯', '气': '氣', '汇': '匯',
            '汉': '漢', '汤': '湯', '汹': '洶', '沉': '沉', '沟': '溝', '没': '沒', '沤': '漚',
            '沥': '瀝', '沦': '淪', '沧': '滄', '沪': '滬', '泞': '濘', '泪': '淚', '泼': '潑',
            '泽': '澤', '洁': '潔', '洒': '灑', '洼': '窪', '浅': '淺', '浆': '漿', '浇': '澆',
            '浊': '濁', '测': '測', '济': '濟', '浑': '渾', '浓': '濃', '涂': '塗', '涉': '涉',
            '涌': '湧', '涛': '濤', '涝': '澇', '涟': '漣', '涡': '渦', '涣': '渙', '涤': '滌',
            '润': '潤', '涧': '澗', '涨': '漲', '涩': '澀', '淀': '澱', '渊': '淵', '渍': '漬',
            '渐': '漸', '渔': '漁', '渗': '滲', '温': '溫', '游': '遊', '湾': '灣', '湿': '濕',
            '溃': '潰', '溅': '濺', '滚': '滾', '满': '滿', '滤': '濾', '滥': '濫', '滦': '灤',
            '滨': '濱', '滩': '灘', '滴': '滴', '滚': '滾', '漏': '漏', '漂': '漂', '漆': '漆',
            '演': '演', '漠': '漠', '汉': '漢', '涟': '漣', '漫': '漫', '渍': '漬', '漱': '漱',
            '涨': '漲', '潍': '濰', '潘': '潘', '潜': '潛', '潦': '潦', '潭': '潭', '潮': '潮',
            '溃': '潰', '澜': '瀾', '澳': '澳', '澡': '澡', '激': '激', '濒': '瀕', '湿': '濕',
            '泞': '濘', '泻': '瀉', '泼': '潑', '泽': '澤', '洁': '潔', '洒': '灑', '洼': '窪',
            '浅': '淺', '浆': '漿', '浇': '澆', '浊': '濁', '测': '測', '济': '濟', '浑': '渾',
            '浓': '濃', '涂': '塗', '涉': '涉', '涌': '湧', '涛': '濤', '涝': '澇', '涟': '漣',
            '涡': '渦', '涣': '渙', '涤': '滌', '润': '潤', '涧': '澗', '涨': '漲', '涩': '澀',
            '淀': '澱', '渊': '淵', '渍': '漬', '渐': '漸', '渔': '漁', '渗': '滲', '温': '溫',
            '游': '遊', '湾': '灣', '湿': '濕', '溃': '潰', '溅': '濺', '滚': '滾', '满': '滿',
            '滤': '濾', '滥': '濫', '滦': '灤', '滨': '濱', '滩': '灘', '滴': '滴', '滚': '滾',
            '漏': '漏', '漂': '漂', '漆': '漆', '演': '演', '漠': '漠', '汉': '漢', '涟': '漣',
            '漫': '漫', '渍': '漬', '漱': '漱', '涨': '漲', '潍': '濰', '潘': '潘', '潜': '潛',
            '潦': '潦', '潭': '潭', '潮': '潮', '溃': '潰', '澜': '瀾', '澳': '澳', '澡': '澡',
            '激': '激', '濒': '瀕', '湿': '濕', '泞': '濘', '泻': '瀉', '灰': '灰', '灶': '灶',
            '灾': '災', '灿': '燦', '炀': '煬', '炉': '爐', '点': '點', '炽': '熾', '烁': '爍',
            '烂': '爛', '烃': '烴', '烛': '燭', '烟': '煙', '烦': '煩', '烧': '燒', '烫': '燙',
            '热': '熱', '焕': '煥', '爱': '愛', '爷': '爺', '牍': '牘', '牵': '牽', '牺': '犧',
            '犹': '猶', '狈': '狽', '狞': '獰', '独': '獨', '狭': '狹', '狮': '獅', '狰': '猙',
            '狱': '獄', '猎': '獵', '猪': '豬', '猫': '貓', '献': '獻', '獭': '獺', '玛': '瑪',
            '环': '環', '现': '現', '珐': '琺', '珑': '瓏', '琐': '瑣', '琼': '瓊', '瑶': '瑤',
            '电': '電', '画': '畫', '畅': '暢', '畴': '疇', '疏': '疏', '疗': '療', '疙': '疙',
            '疚': '疚', '疮': '瘡', '疯': '瘋', '痈': '癰', '痉': '痙', '痒': '癢', '痪': '瘓',
            '痴': '癡', '痹': '痺', '瘅': '癉', '瘪': '癟', '瘫': '癱', '瘾': '癮', '瘿': '癭',
            '癣': '癬', '盐': '鹽', '监': '監', '盖': '蓋', '盗': '盜', '盘': '盤', '着': '著',
            '睁': '睜', '瞒': '瞞', '瞩': '矚', '矫': '矯', '矾': '礬', '矿': '礦', '码': '碼',
            '砖': '磚', '砗': '硨', '砚': '硯', '砺': '礪', '砾': '礫', '础': '礎', '硅': '矽',
            '硕': '碩', '确': '確', '硷': '鹼', '碍': '礙', '碎': '碎', '碰': '碰', '碗': '碗',
            '碌': '碌', '碑': '碑', '碉': '碉', '碘': '碘', '礁': '礁', '磷': '磷', '磺': '磺',
            '碱': '堿', '碳': '碳', '磨': '磨', '礴': '礴', '礼': '禮', '社': '社', '祈': '祈',
            '袄': '襖', '祢': '禰', '祷': '禱', '祸': '禍', '禀': '稟', '禄': '祿', '禅': '禪',
            '离': '離', '秃': '禿', '秆': '稈', '种': '種', '积': '積', '称': '稱', '秽': '穢',
            '税': '稅', '稣': '穌', '稳': '穩', '穷': '窮', '窃': '竊', '窍': '竅', '窑': '窯',
            '窜': '竄', '窝': '窩', '窥': '窺', '竖': '豎', '竞': '競', '笋': '筍', '笔': '筆',
            '笺': '箋', '笼': '籠', '筑': '築', '筹': '籌', '签': '簽', '简': '簡', '箩': '籮',
            '篓': '簍', '篮': '籃', '篱': '籬', '篷': '篷', '糕': '糕', '糖': '糖', '糙': '糙',
            '糜': '糜', '糟': '糟', '粪': '糞', '粮': '糧', '粤': '粵', '粹': '粹', '纠': '糾',
            '纡': '紆', '红': '紅', '纣': '紂', '纤': '纖', '纥': '紇', '约': '約', '级': '級',
            '纨': '紈', '纪': '紀', '纫': '紉', '纬': '緯', '纭': '紜', '纯': '純', '纰': '紕',
            '纱': '紗', '纲': '綱', '纳': '納', '纵': '縱', '纶': '綸', '纷': '紛', '纸': '紙',
            '纹': '紋', '纺': '紡', '纽': '紐', '纾': '紓', '线': '線', '绀': '紺', '练': '練',
            '组': '組', '绅': '紳', '细': '細', '织': '織', '终': '終', '绊': '絆', '绍': '紹',
            '绎': '繹', '经': '經', '绑': '綁', '绒': '絨', '结': '結', '绕': '繞', '绘': '繪',
            '给': '給', '绚': '絢', '绛': '絳', '络': '絡', '绝': '絕', '绞': '絞', '统': '統',
            '绢': '絹', '绣': '繡', '绥': '綏', '绦': '絛', '继': '繼', '绩': '績', '绪': '緒',
            '绫': '綾', '续': '續', '绮': '綺', '绯': '緋', '绰': '綽', '绳': '繩', '维': '維',
            '绵': '綿', '绷': '繃', '绸': '綢', '综': '綜', '绽': '綻', '绿': '綠', '缀': '綴',
            '缄': '緘', '缅': '緬', '缆': '纜', '缇': '緹', '缈': '緲', '缉': '緝', '缎': '緞',
            '缓': '緩', '缔': '締', '缕': '縷', '编': '編', '缘': '緣', '缚': '縛', '缝': '縫',
            '缠': '纏', '缨': '纓', '缩': '縮', '缴': '繳', '网': '網', '罗': '羅', '罚': '罰',
            '罢': '罷', '羡': '羨', '翘': '翹', '翱': '翺', '耸': '聳', '耻': '恥', '聂': '聶',
            '聋': '聾', '职': '職', '联': '聯', '聪': '聰', '肃': '肅', '肠': '腸', '肤': '膚',
            '肾': '腎', '肿': '腫', '胀': '脹', '胁': '脅', '胆': '膽', '胜': '勝', '胶': '膠',
            '脉': '脈', '脏': '髒', '脐': '臍', '脑': '腦', '脓': '膿', '脖': '脖', '脚': '腳',
            '脱': '脫', '脸': '臉', '腊': '臘', '腻': '膩', '腾': '騰', '致': '緻', '舆': '輿',
            '舍': '捨', '舰': '艦', '舱': '艙', '艰': '艱', '艳': '艷', '艺': '藝', '节': '節',
            '芜': '蕪', '芦': '蘆', '苍': '蒼', '苏': '蘇', '苹': '蘋', '范': '範', '茧': '繭',
            '荆': '荊', '荐': '薦', '荚': '莢', '荡': '蕩', '荣': '榮', '荤': '葷', '荧': '熒',
            '药': '藥', '莱': '萊', '莲': '蓮', '获': '獲', '莹': '瑩', '萝': '蘿', '萤': '螢',
            '营': '營', '萧': '蕭', '萨': '薩', '葱': '蔥', '蒋': '蔣', '蓝': '藍', '蓟': '薊',
            '蔷': '薔', '蔼': '藹', '蕴': '蘊', '虏': '虜', '虑': '慮', '号': '號', '亏': '虧',
            '虾': '蝦', '虽': '雖', '蚀': '蝕', '蚁': '蟻', '蚂': '螞', '蚕': '蠶', '蛊': '蠱',
            '蛮': '蠻', '蛰': '蟄', '蜂': '蜂', '蜕': '蛻', '蜗': '蝸', '蜡': '蠟', '蝇': '蠅',
            '蝉': '蟬', '蝎': '蠍', '衅': '釁', '衔': '銜', '补': '補', '衬': '襯', '袄': '襖',
            '袜': '襪', '袭': '襲', '装': '裝', '裆': '襠', '裤': '褲', '见': '見', '观': '觀',
            '规': '規', '觅': '覓', '视': '視', '览': '覽', '觉': '覺', '触': '觸', '角': '角',
            '计': '計', '订': '訂', '讣': '訃', '认': '認', '讥': '譏', '讦': '訐', '讧': '訌',
            '讨': '討', '让': '讓', '讪': '訕', '讫': '訖', '训': '訓', '议': '議', '讯': '訊',
            '记': '記', '讲': '講', '讳': '諱', '讴': '謳', '讶': '訝', '讷': '訥', '许': '許',
            '讹': '訛', '论': '論', '讼': '訟', '讽': '諷', '设': '設', '访': '訪', '诀': '訣',
            '证': '證', '评': '評', '诅': '詛', '识': '識', '诈': '詐', '诉': '訴', '诊': '診',
            '词': '詞', '译': '譯', '试': '試', '诗': '詩', '诚': '誠', '诛': '誅', '话': '話',
            '诞': '誕', '诡': '詭', '询': '詢', '诣': '詣', '该': '該', '详': '詳', '诧': '詫',
            '誉': '譽', '誊': '謄', '谨': '謹', '谩': '謾', '谬': '謬', '谭': '譚', '谱': '譜',
            '谴': '譴', '谷': '穀', '贝': '貝', '贞': '貞', '负': '負', '贡': '貢', '财': '財',
            '责': '責', '贤': '賢', '败': '敗', '账': '賬', '货': '貨', '质': '質', '贩': '販',
            '贪': '貪', '贫': '貧', '贬': '貶', '购': '購', '贮': '貯', '贯': '貫', '贰': '貳',
            '贱': '賤', '贴': '貼', '贵': '貴', '贷': '貸', '贸': '貿', '费': '費', '贺': '賀',
            '贼': '賊', '贾': '賈', '贿': '賄', '赁': '賃', '赂': '賂', '赃': '贓', '资': '資',
            '赊': '賒', '赋': '賦', '赌': '賭', '赎': '贖', '赏': '賞', '赐': '賜', '赔': '賠',
            '赖': '賴', '赘': '贅', '赚': '賺', '赛': '賽', '赞': '贊', '赠': '贈', '赡': '贍',
            '赢': '贏', '赵': '趙', '赶': '趕', '趋': '趨', '跃': '躍', '踪': '蹤', '车': '車',
            '轧': '軋', '轨': '軌', '轩': '軒', '转': '轉', '轮': '輪', '软': '軟', '轰': '轟',
            '轴': '軸', '轻': '輕', '载': '載', '轿': '轎', '较': '較', '辅': '輔', '辆': '輛',
            '辈': '輩', '辉': '輝', '辐': '輻', '辑': '輯', '输': '輸', '辖': '轄', '辕': '轅',
            '辗': '輾', '辙': '轍', '边': '邊', '达': '達', '迁': '遷', '过': '過', '迈': '邁',
            '运': '運', '还': '還', '这': '這', '进': '進', '远': '遠', '违': '違', '连': '連',
            '迟': '遲', '适': '適', '选': '選', '逊': '遜', '递': '遞', '逻': '邏', '遗': '遺',
            '遥': '遙', '邓': '鄧', '邮': '郵', '邻': '鄰', '郁': '鬱', '郑': '鄭', '郧': '鄖',
            '郸': '鄲', '酝': '醞', '酱': '醬', '酽': '釅', '采': '採', '释': '釋', '里': '裡',
            '重': '重', '鉴': '鑒', '针': '針', '钉': '釘', '钊': '釗', '钎': '釺', '钒': '釩',
            '钓': '釣', '钙': '鈣', '钝': '鈍', '钞': '鈔', '钟': '鐘', '钠': '鈉', '钡': '鋇',
            '钢': '鋼', '钥': '鑰', '钦': '欽', '钧': '鈞', '钨': '鎢', '钩': '鉤', '钱': '錢',
            '钳': '鉗', '钻': '鑽', '钾': '鉀', '铁': '鐵', '铂': '鉑', '铃': '鈴', '铅': '鉛',
            '铆': '鉚', '铜': '銅', '铝': '鋁', '铡': '鍘', '铣': '銑', '铬': '鉻', '铭': '銘',
            '铲': '鏟', '银': '銀', '铸': '鑄', '铺': '鋪', '链': '鏈', '销': '銷', '锁': '鎖',
            '锄': '鋤', '锅': '鍋', '锉': '銼', '锈': '銹', '锋': '鋒', '锌': '鋅', '锐': '銳',
            '锑': '銻', '锒': '鋃', '锡': '錫', '锤': '錘', '锦': '錦', '锨': '鍬', '锭': '錠',
            '键': '鍵', '锯': '鋸', '锰': '錳', '锹': '鍬', '锻': '鍛', '镀': '鍍', '镁': '鎂',
            '镂': '鏤', '镇': '鎮', '镌': '鐫', '镐': '鎬', '镜': '鏡', '镣': '鐐', '镰': '鐮',
            '镶': '鑲', '长': '長', '门': '門', '闪': '閃', '闭': '閉', '问': '問', '闯': '闖',
            '闰': '閏', '闲': '閑', '间': '間', '闵': '閔', '闸': '閘', '闹': '鬧', '闻': '聞',
            '闽': '閩', '阀': '閥', '阁': '閣', '阅': '閱', '阉': '閹', '阎': '閻', '阐': '闡',
            '阔': '闊', '队': '隊', '阳': '陽', '阴': '陰', '阵': '陣', '阶': '階', '阻': '阻',
            '阿': '阿', '陀': '陀', '际': '際', '陆': '陸', '陈': '陳', '陌': '陌', '陋': '陋',
            '降': '降', '限': '限', '陕': '陝', '陛': '陛', '随': '隨', '隐': '隱', '隶': '隸',
            '隶': '隸', '难': '難', '雏': '雛', '杂': '雜', '雕': '雕', '雨': '雨', '雪': '雪',
            '雳': '靂', '雾': '霧', '霉': '黴', '霭': '靄', '靓': '靚', '静': '靜', '靛': '靛',
            '靠': '靠', '面': '麵', '韦': '韋', '韧': '韌', '韩': '韓', '韵': '韻', '页': '頁',
            '顶': '頂', '顷': '頃', '项': '項', '顺': '順', '须': '須', '顽': '頑', '顾': '顧',
            '顿': '頓', '颁': '頒', '颂': '頌', '预': '預', '颅': '顱', '领': '領', '颇': '頗',
            '颈': '頸', '颊': '頰', '颐': '頤', '频': '頻', '颓': '頹', '颖': '穎', '颗': '顆',
            '题': '題', '颜': '顏', '额': '額', '颠': '顛', '类': '類', '颤': '顫', '风': '風',
            '飞': '飛', '食': '食', '餐': '餐', '饥': '飢', '饭': '飯', '饮': '飲', '餞': '餞',
            '饰': '飾', '饱': '飽', '饲': '飼', '饵': '餌', '饶': '饒', '饺': '餃', '饼': '餅',
            '饿': '餓', '馁': '餒', '馅': '餡', '馆': '館', '馋': '饞', '馏': '餾', '馒': '饅',
            '马': '馬', '驮': '馱', '驯': '馴', '驰': '馳', '驱': '驅', '驳': '駁', '驴': '驢',
            '驶': '駛', '驹': '駒', '驻': '駐', '驼': '駝', '驾': '駕', '骂': '罵', '骄': '驕',
            '骆': '駱', '骇': '駭', '验': '驗', '骏': '駿', '骑': '騎', '骗': '騙', '骚': '騷',
            '骡': '騾', '骤': '驟', '骨': '骨', '髓': '髓', '高': '高', '鬃': '鬃', '鬼': '鬼',
            '魁': '魁', '魂': '魂', '魄': '魄', '魏': '魏', '鱼': '魚', '鲁': '魯', '鲍': '鮑',
            '鲜': '鮮', '鲤': '鯉', '鲸': '鯨', '鳃': '鰓', '鳖': '鱉', '鳞': '鱗', '鸟': '鳥',
            '鸡': '雞', '鸣': '鳴', '鸥': '鷗', '鸦': '鴉', '鸭': '鴨', '鸳': '鴛', '鸽': '鴿',
            '鸿': '鴻', '鹃': '鵑', '鹅': '鵝', '鹊': '鵲', '鹏': '鵬', '鹤': '鶴', '鹰': '鷹',
            '鹭': '鷺', '盐': '鹽', '鹿': '鹿', '麦': '麥', '麻': '麻', '黄': '黃', '齐': '齊',
            '齿': '齒', '龄': '齡', '龙': '龍', '龟': '龜',
            // 添加更多映射...
        };

        // --- 反向映射表 (繁体 -> 简体) ---
        const t2sMap = {};
        for (const s in s2tMap) {
            if (s2tMap.hasOwnProperty(s)) {
                t2sMap[s2tMap[s]] = s;
            }
        }
        // 处理一些特殊情况或一对多映射（这里简化处理，只取第一个）
        // 例如 '干' vs '幹', '髮' vs '發' 等，简单映射无法完美处理
        // 实际应用中可能需要更复杂的逻辑或词语级别的判断

        // --- DOM 元素获取 ---
        const inputTextElem = document.getElementById('inputText');
        const outputTextElem = document.getElementById('outputText');
        const outputContainerElem = document.getElementById('outputContainer');
        const pasteButton = document.getElementById('pasteButton');
        const copyButton = document.getElementById('copyButton');
        const toastMessageElem = document.getElementById('toastMessage');

        let toastTimeout; // 用于存储提示消息的 Timeout ID
        let debounceTimeout; // 用于存储防抖的 Timeout ID

        // --- 功能函数 ---

        // 防抖函数
        function debounce(func, delay) {
            return function (...args) {
                clearTimeout(debounceTimeout);
                debounceTimeout = setTimeout(() => {
                    func.apply(this, args);
                }, delay);
            };
        }

        // 显示提示消息
        function showToast(message) {
            if (toastTimeout) {
                clearTimeout(toastTimeout); // 清除之前的定时器
            }
            toastMessageElem.textContent = message;
            toastMessageElem.classList.add('show');
            toastTimeout = setTimeout(() => {
                toastMessageElem.classList.remove('show');
            }, 3000); // 延长显示时间以便阅读更长的消息
        }

        // 复制文本到剪贴板
        function copyToClipboard(text, showSuccessToast = true) { // 添加参数控制是否显示成功提示
            if (!text) {
                showToast('没有内容可复制'); // "Nothing to copy"
                return;
            }
            navigator.clipboard.writeText(text)
                .then(() => {
                    if (showSuccessToast) {
                        showToast('已复制到剪贴板'); // "Copied to clipboard"
                    }
                })
                .catch(err => {
                    console.error('Clipboard write failed:', err.message || err);
                    let toastMsg = '复制失败，请手动复制'; // Default message
                    if (err.message && err.message.toLowerCase().includes('permissions policy')) {
                        toastMsg = '复制失败：浏览器权限策略限制。请尝试在 https 或 localhost 环境下运行。';
                    } else if (err.message && err.message.toLowerCase().includes('secure context')) {
                        toastMsg = '复制失败：需要安全环境 (https 或 localhost)。';
                    }
                    showToast(toastMsg);
                });
        }

        // 转换文本并高亮显示
        function convertAndHighlight(text, map) {
            let resultHTML = '';
            let convertedText = '';
            for (let i = 0; i < text.length; i++) {
                const char = text[i];
                const convertedChar = map[char];
                if (convertedChar && convertedChar !== char) {
                    // 如果字符被转换了，添加高亮样式
                    resultHTML += `<span class="converted-char">${convertedChar}</span>`;
                    convertedText += convertedChar;
                } else {
                    // 如果未转换或映射相同，直接添加
                    resultHTML += char;
                    convertedText += char;
                }
            }
            return { html: resultHTML, text: convertedText };
        }

        // 自动检测并转换 (核心逻辑)
        function autoConvert() {
            const inputText = inputTextElem.value; // 不再 trim()，以便实时反映输入
            if (!inputText) {
                outputTextElem.innerHTML = ''; // 清空输出
                return;
            }

            let simplifiedCount = 0;
            let traditionalCount = 0;

            // 简单检测
            for (const char of inputText) {
                if (s2tMap[char] && s2tMap[char] !== char) simplifiedCount++;
                if (t2sMap[char] && t2sMap[char] !== char) traditionalCount++;
            }

            let conversionResult;
            // 判断转换方向
            if (simplifiedCount >= traditionalCount) { // 默认或倾向于简转繁
                conversionResult = convertAndHighlight(inputText, s2tMap);
            } else { // 倾向于繁转简
                conversionResult = convertAndHighlight(inputText, t2sMap);
            }

            // 更新输出区域的 HTML 内容
            outputTextElem.innerHTML = conversionResult.html;

            // 自动复制结果 (恢复此功能)
            // 第二个参数设为 false，这样自动复制时不显示"已复制"提示，避免干扰
            copyToClipboard(conversionResult.text, false);
        }

        // --- 事件监听 ---

        // 使用防抖函数包装 autoConvert
        const debouncedAutoConvert = debounce(autoConvert, 400); // 延迟 400 毫秒触发

        // 监听输入框的 input 事件
        inputTextElem.addEventListener('input', debouncedAutoConvert);

        // 手动复制按钮
        copyButton.addEventListener('click', () => {
            const plainText = outputTextElem.textContent || outputTextElem.innerText;
            copyToClipboard(plainText, true); // 手动复制时显示成功提示
        });

        // 贴入按钮
        pasteButton.addEventListener('click', async () => {
            try {
                // 读取剪贴板内容需要安全上下文和用户交互触发
                const text = await navigator.clipboard.readText();
                if (text) {
                    inputTextElem.value = text;
                    // 触发一次立即转换和自动复制（不防抖）
                    autoConvert();
                    // 可选：给用户一个视觉反馈
                    inputTextElem.focus();
                    showToast('内容已贴入');
                } else {
                    showToast('剪贴板为空');
                }
            } catch (err) {
                console.error('Clipboard read failed:', err.message || err);
                let toastMsg = '贴入失败，请检查权限或手动粘贴';
                if (err.message && err.message.toLowerCase().includes('permissions policy')) {
                    toastMsg = '贴入失败：浏览器权限策略限制。请尝试在 https 或 localhost 环境下运行。';
                } else if (err.message && err.message.toLowerCase().includes('secure context')) {
                    toastMsg = '贴入失败：需要安全环境 (https 或 localhost)。';
                } else if (err.name === 'NotAllowedError') {
                    toastMsg = '贴入失败：需要剪贴板读取权限。';
                }
                showToast(toastMsg);
            }
        });

    </script>
</body>

</html>